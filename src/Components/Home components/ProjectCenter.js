import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useMemo } from 'react';
import { useNavigate } from 'react-router-dom';
import { useTheme } from '../../ThemeContext';
import { useGetProjectsQuery } from '../../Features/Apis/Projects.Api';
import { Eye, ArrowUpRight, Clock, Search, Terminal, Layers, ChevronRight, Hash, AlertCircle } from 'lucide-react';
const ProjectCenter = () => {
    const { theme } = useTheme();
    const navigate = useNavigate();
    const { data: projects, isLoading } = useGetProjectsQuery();
    const [searchTerm, setSearchTerm] = useState('');
    // 1. Filtering Logic
    const filteredProjects = useMemo(() => {
        if (!projects)
            return [];
        return projects.filter(project => project.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
            project.slug.toLowerCase().includes(searchTerm.toLowerCase()) ||
            project.techs?.some(t => t.technology?.name.toLowerCase().includes(searchTerm.toLowerCase())));
    }, [searchTerm, projects]);
    // Limit to 3 for the "Featured" display
    const displayProjects = filteredProjects.slice(0, 3);
    // --- BRANDED LOADING STATE ---
    if (isLoading)
        return (_jsxs("div", { className: "h-screen flex flex-col items-center justify-center gap-8", style: { backgroundColor: theme["base-100"] }, children: [_jsxs("div", { className: "relative", children: [_jsx("div", { className: "w-24 h-24 border-2 border-dashed rounded-full animate-[spin_4s_linear_infinite] opacity-20", style: { borderColor: theme.primary } }), _jsx("div", { className: "absolute inset-2 border-t-2 rounded-full animate-spin", style: { borderColor: theme.primary } }), _jsx("div", { className: "absolute inset-0 m-auto w-2 h-2 rounded-full animate-pulse", style: { backgroundColor: theme.primary } })] }), _jsxs("div", { className: "text-center space-y-2", children: [_jsx("h2", { className: "text-xl font-black uppercase tracking-[0.5em] animate-pulse", children: "Gakenye" }), _jsx("p", { className: "text-[10px] font-bold opacity-40 uppercase tracking-[0.3em]", children: "Syncing_Project_Nodes..." })] })] }));
    return (_jsx("section", { className: "py-16 md:py-32 transition-all duration-500", style: { backgroundColor: theme["base-100"], color: theme["base-content"] }, children: _jsxs("div", { className: "max-w-[1440px] mx-auto px-6 lg:px-16", children: [_jsxs("div", { className: "flex flex-col lg:flex-row lg:items-end justify-between gap-12 mb-24", children: [_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "inline-flex items-center gap-3 px-4 py-1.5 rounded-full border border-opacity-10 text-[10px] font-black uppercase tracking-widest", style: { borderColor: theme.primary, color: theme.primary }, children: [_jsx(Terminal, { size: 14, className: "animate-pulse" }), "Featured_Nodes_v2.0"] }), _jsxs("h2", { className: "text-6xl md:text-8xl font-black uppercase italic tracking-tighter leading-[0.8]", children: ["SELECTED ", _jsx("br", {}), " ", _jsx("span", { style: { color: theme.primary }, children: "WORKS." })] })] }), _jsxs("div", { className: "relative w-full lg:max-w-md group", children: [_jsxs("div", { className: "flex justify-between items-center mb-2 px-1", children: [_jsx("span", { className: "text-[9px] font-black uppercase tracking-widest opacity-40", children: "Search_Registry" }), searchTerm && (_jsxs("span", { className: "text-[9px] font-black uppercase tracking-widest", style: { color: theme.primary }, children: [filteredProjects.length, " ", filteredProjects.length === 1 ? 'Project' : 'Projects', " Found"] }))] }), _jsxs("div", { className: "relative", children: [_jsx(Search, { size: 20, className: "absolute left-0 top-1/2 -translate-y-1/2 opacity-20" }), _jsx("input", { type: "text", placeholder: "FILTER_BY_NAME_OR_TECH...", value: searchTerm, onChange: (e) => setSearchTerm(e.target.value), className: "w-full bg-transparent border-b-2 py-5 pl-10 pr-10 text-xs font-bold uppercase tracking-[0.2em] focus:outline-none focus:border-opacity-100 transition-all", style: { borderColor: `${theme["base-content"]}15` } })] })] })] }), filteredProjects.length > 0 ? (_jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 lg:gap-14", children: displayProjects.map((project) => (_jsxs("div", { onClick: () => navigate(`/project/${project.id}`), className: "group relative flex flex-col rounded-[3rem] overflow-hidden border border-opacity-5 cursor-pointer transition-all duration-700 hover:-translate-y-3 shadow-2xl", style: { backgroundColor: `${theme["base-content"]}02`, borderColor: `${theme["base-content"]}10` }, children: [_jsxs("div", { className: "relative aspect-[16/11] overflow-hidden bg-black", children: [_jsx("img", { src: project.thumbnail?.fileUrl || '/api/placeholder/800/500', className: "w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 grayscale-[30%] group-hover:grayscale-0 opacity-80 group-hover:opacity-100", alt: project.title }), _jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-90" }), _jsx("div", { className: "absolute top-6 left-6", children: _jsxs("div", { className: "px-3 py-1 rounded-md bg-black/60 backdrop-blur-md border border-white/10 flex items-center gap-2", children: [_jsx("div", { className: "w-1.5 h-1.5 rounded-full animate-pulse", style: { backgroundColor: theme.primary } }), _jsx("span", { className: "text-[8px] font-black uppercase tracking-widest text-white", children: project.status })] }) })] }), _jsxs("div", { className: "p-10 space-y-6", children: [_jsxs("div", { className: "space-y-2", children: [_jsxs("div", { className: "flex items-center gap-2 opacity-30 text-[8px] font-black uppercase tracking-[0.2em]", children: [_jsx(Hash, { size: 10 }), " ", project.id.slice(0, 8)] }), _jsx("h3", { className: "text-3xl font-black uppercase italic tracking-tighter group-hover:text-primary transition-colors leading-none", children: project.title })] }), _jsx("p", { className: "text-xs opacity-40 italic line-clamp-2 uppercase tracking-tighter leading-relaxed", children: project.mainDescription }), _jsxs("div", { className: "flex flex-wrap gap-2 pt-2", children: [project.techs?.slice(0, 4).map((tech, index) => (_jsx("div", { className: "px-2 py-1 text-[7px] font-black uppercase tracking-widest border rounded-md", style: { color: theme.primary, borderColor: `${theme.primary}30` }, children: tech.technology?.name }, index))), project.techs?.length > 4 && (_jsxs("span", { className: "text-[7px] font-black opacity-30 mt-1 uppercase tracking-widest", children: ["+", project.techs.length - 4, " More_Nodes"] }))] }), _jsxs("div", { className: "pt-6 border-t border-opacity-5 flex items-center justify-between", style: { borderColor: theme["base-content"] }, children: [_jsxs("div", { className: "flex gap-6", children: [_jsxs("div", { className: "flex flex-col gap-1", children: [_jsx("span", { className: "text-[7px] font-black opacity-20 uppercase tracking-widest", children: "Views" }), _jsxs("span", { className: "text-[10px] font-black flex items-center gap-1.5", children: [_jsx(Eye, { size: 12, style: { color: theme.primary } }), " ", project.viewCount] })] }), _jsxs("div", { className: "flex flex-col gap-1", children: [_jsx("span", { className: "text-[7px] font-black opacity-20 uppercase tracking-widest", children: "Rel" }), _jsxs("span", { className: "text-[10px] font-black flex items-center gap-1.5", children: [_jsx(Clock, { size: 12 }), " ", new Date(project.createdAt).getFullYear()] })] })] }), _jsx("div", { className: "p-3 rounded-2xl border border-opacity-10 group-hover:rotate-45 transition-all duration-500", style: { borderColor: theme["base-content"] }, children: _jsx(ArrowUpRight, { size: 18 }) })] })] })] }, project.id))) })) : (
                /* --- EMPTY STATE / NO RESULTS FOUND --- */
                _jsxs("div", { className: "py-24 flex flex-col items-center justify-center text-center space-y-6 rounded-[3rem] border-2 border-dashed border-opacity-5", style: { borderColor: theme["base-content"] }, children: [_jsx("div", { className: "p-6 rounded-full bg-opacity-5", style: { backgroundColor: theme.primary }, children: _jsx(AlertCircle, { size: 48, style: { color: theme.primary }, className: "opacity-40" }) }), _jsxs("div", { className: "space-y-2", children: [_jsx("h3", { className: "text-2xl font-black uppercase tracking-tighter", children: "Null_Pointer_Exception" }), _jsxs("p", { className: "text-xs opacity-40 uppercase tracking-widest max-w-xs mx-auto", children: ["No project nodes matching ", _jsxs("span", { style: { color: theme.primary }, children: ["\"", searchTerm, "\""] }), " were found in the current sector."] })] }), _jsx("button", { onClick: () => setSearchTerm(''), className: "text-[10px] font-black uppercase tracking-[0.2em] border-b-2 pb-1 transition-all hover:opacity-100 opacity-60", style: { borderColor: theme.primary }, children: "Clear_Filter" })] })), filteredProjects.length > 0 && (_jsx("div", { className: "mt-24 flex justify-center", children: _jsxs("button", { onClick: () => navigate('/registry'), className: "group relative px-12 py-6 overflow-hidden rounded-full border transition-all duration-500 hover:pr-16", style: { borderColor: `${theme["base-content"]}20`, color: theme["base-content"] }, children: [_jsxs("span", { className: "relative flex items-center gap-4 text-[11px] font-black uppercase tracking-[0.5em]", children: ["View Full Registry", _jsx("div", { className: "p-2 rounded-full", style: { backgroundColor: theme.primary, color: theme["base-100"] }, children: _jsx(Layers, { size: 16 }) })] }), _jsx(ChevronRight, { size: 20, className: "absolute right-6 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-500", style: { color: theme.primary } })] }) }))] }) }));
};
export default ProjectCenter;
