import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useMemo } from 'react';
import { useNavigate } from 'react-router-dom';
import { useTheme } from '../ThemeContext';
import { useGetProjectsQuery } from '../Features/Apis/Projects.Api';
import { Navbar } from '../Components/Navbar';
import { Search, Eye, Clock, ArrowRight, LayoutGrid, List, Terminal, X, AlertCircle, ChevronRight, Activity, Globe } from 'lucide-react';
const ProjectsRegistry = () => {
    const { theme } = useTheme();
    const navigate = useNavigate();
    const { data: projects, isLoading } = useGetProjectsQuery();
    // States
    const [searchTerm, setSearchTerm] = useState('');
    const [viewMode, setViewMode] = useState('grid');
    const [activeStatus, setActiveStatus] = useState('all');
    // --- ENHANCED FILTER LOGIC ---
    const filteredProjects = useMemo(() => {
        if (!projects)
            return [];
        return projects.filter(p => {
            const matchesSearch = p.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                p.mainDescription.toLowerCase().includes(searchTerm.toLowerCase()) ||
                p.techs?.some(t => t.technology?.name.toLowerCase().includes(searchTerm.toLowerCase()));
            const matchesStatus = activeStatus === 'all' || p.status === activeStatus;
            return matchesSearch && matchesStatus;
        });
    }, [searchTerm, activeStatus, projects]);
    // --- BRANDED LOADING STATE ---
    if (isLoading)
        return (_jsxs("div", { className: "h-screen flex flex-col items-center justify-center gap-8", style: { backgroundColor: theme["base-100"] }, children: [_jsxs("div", { className: "relative", children: [_jsx("div", { className: "w-24 h-24 border-2 border-dashed rounded-full animate-[spin_6s_linear_infinite] opacity-10", style: { borderColor: theme.primary } }), _jsx("div", { className: "absolute inset-2 border-t-2 rounded-full animate-spin", style: { borderColor: theme.primary } }), _jsx("div", { className: "absolute inset-0 m-auto w-2 h-2 rounded-full animate-pulse", style: { backgroundColor: theme.primary } })] }), _jsxs("div", { className: "text-center space-y-2", children: [_jsx("h2", { className: "text-xl font-black uppercase tracking-[0.6em] animate-pulse", children: "Gakenye" }), _jsx("p", { className: "text-[9px] font-bold opacity-30 uppercase tracking-[0.4em]", children: "Initialising_Data_Stream..." })] })] }));
    return (_jsxs("main", { className: "min-h-screen pt-[64px] transition-all duration-700", style: { backgroundColor: theme["base-100"], color: theme["base-content"] }, children: [_jsx(Navbar, {}), _jsxs("header", { className: "px-6 lg:px-16 py-16 border-b border-white/5 relative overflow-hidden", children: [_jsx("div", { className: "absolute top-10 right-[-5%] text-[15vh] font-black opacity-[0.02] italic pointer-events-none select-none", children: "REGISTRY_01" }), _jsxs("div", { className: "max-w-7xl mx-auto space-y-12", children: [_jsxs("nav", { className: "flex items-center gap-4 text-[9px] font-black uppercase tracking-widest opacity-40", children: [_jsx("span", { className: "hover:text-primary cursor-pointer transition-colors", onClick: () => navigate('/'), children: "Root" }), _jsx(ChevronRight, { size: 10 }), _jsx("span", { style: { color: theme.primary }, children: "Archive_Nodes" })] }), _jsxs("div", { className: "flex flex-col xl:flex-row xl:items-end justify-between gap-12", children: [_jsxs("div", { className: "space-y-4", children: [_jsxs("h1", { className: "text-7xl md:text-9xl font-black uppercase italic tracking-tighter leading-[0.8]", children: ["ARCHIVE ", _jsx("br", {}), " ", _jsx("span", { className: "text-outline", style: { WebkitTextStroke: `1px ${theme["base-content"]}40`, color: 'transparent' }, children: "CORE." })] }), _jsxs("div", { className: "flex items-center gap-6", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Activity, { size: 14, style: { color: theme.primary } }), _jsxs("span", { className: "text-[10px] font-bold uppercase tracking-widest", children: [projects?.length, " Total_Nodes"] })] }), _jsx("div", { className: "w-px h-4 bg-white/10" }), _jsxs("span", { className: "text-[10px] font-bold uppercase tracking-widest opacity-40", children: [filteredProjects.length, " Result_Matches"] })] })] }), _jsxs("div", { className: "w-full xl:max-w-2xl space-y-6", children: [_jsxs("div", { className: "relative group", children: [_jsx("div", { className: "absolute -inset-1 bg-gradient-to-r from-primary/20 to-transparent rounded-2xl blur opacity-0 group-focus-within:opacity-100 transition duration-500", style: { "--tw-gradient-from": `${theme.primary}30` } }), _jsxs("div", { className: "relative flex items-center bg-black/20 border border-white/10 rounded-2xl p-2 backdrop-blur-xl", children: [_jsx(Search, { className: "ml-4 opacity-20", size: 20 }), _jsx("input", { type: "text", placeholder: "SEARCH_NODE_IDENTIFIER...", value: searchTerm, onChange: (e) => setSearchTerm(e.target.value), className: "flex-grow bg-transparent py-4 px-4 text-xs font-black uppercase tracking-widest focus:outline-none" }), searchTerm && (_jsx("button", { onClick: () => setSearchTerm(''), className: "p-2 hover:bg-white/5 rounded-xl transition-all", children: _jsx(X, { size: 18, className: "opacity-40" }) }))] })] }), _jsxs("div", { className: "flex flex-wrap items-center justify-between gap-4", children: [_jsx("div", { className: "flex gap-2", children: ['all', 'published', 'archived'].map((status) => (_jsx("button", { onClick: () => setActiveStatus(status), className: "px-4 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest border border-white/5 transition-all", style: {
                                                                backgroundColor: activeStatus === status ? theme.primary : 'transparent',
                                                                color: activeStatus === status ? theme["base-100"] : 'inherit',
                                                                opacity: activeStatus === status ? 1 : 0.4
                                                            }, children: status }, status))) }), _jsxs("div", { className: "flex gap-2 p-1 rounded-xl bg-black/40 border border-white/5", children: [_jsx("button", { onClick: () => setViewMode('grid'), className: `p-2.5 rounded-lg transition-all ${viewMode === 'grid' ? 'bg-white/10 opacity-100 shadow-xl' : 'opacity-20 hover:opacity-100'}`, children: _jsx(LayoutGrid, { size: 18 }) }), _jsx("button", { onClick: () => setViewMode('list'), className: `p-2.5 rounded-lg transition-all ${viewMode === 'list' ? 'bg-white/10 opacity-100 shadow-xl' : 'opacity-20 hover:opacity-100'}`, children: _jsx(List, { size: 18 }) })] })] })] })] })] })] }), _jsx("section", { className: "px-6 lg:px-16 py-20", children: _jsx("div", { className: "max-w-7xl mx-auto", children: filteredProjects.length > 0 ? (_jsx("div", { className: viewMode === 'grid'
                            ? "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10"
                            : "flex flex-col gap-6", children: filteredProjects.map((project) => (_jsxs("div", { onClick: () => navigate(`/project/${project.id}`), className: `group relative overflow-hidden cursor-pointer transition-all duration-700 
                    ${viewMode === 'grid'
                                ? 'rounded-[3rem] border border-white/5 bg-black/5 p-8 hover:bg-black/20 hover:-translate-y-4'
                                : 'flex flex-col md:flex-row items-center gap-10 p-8 rounded-[2rem] border border-white/5 bg-black/5 hover:bg-black/20'}`, children: [_jsxs("div", { className: `${viewMode === 'grid' ? 'aspect-[4/3] mb-8' : 'w-full md:w-64 aspect-video md:aspect-square'} rounded-[2rem] overflow-hidden shrink-0 bg-neutral-900 relative`, children: [_jsx("img", { src: project.thumbnail?.fileUrl || '/api/placeholder/400/400', className: "w-full h-full object-cover grayscale-[100%] group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-110 opacity-40 group-hover:opacity-100", alt: project.title }), _jsx("div", { className: "absolute top-4 right-4 p-2 rounded-full bg-black/60 backdrop-blur-md border border-white/10 opacity-0 group-hover:opacity-100 transition-opacity", children: _jsx(Globe, { size: 14, style: { color: theme.primary } }) })] }), _jsxs("div", { className: "flex-grow space-y-6", children: [_jsxs("div", { className: "space-y-2", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsxs("span", { className: "px-2 py-0.5 rounded bg-white/5 text-[7px] font-black uppercase tracking-widest opacity-40 border border-white/5", children: ["ID_", project.id.slice(0, 4)] }), _jsx("div", { className: "h-px flex-grow bg-white/5" })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsx("h3", { className: "text-3xl font-black uppercase italic tracking-tighter group-hover:text-primary transition-colors leading-none", children: project.title }), _jsx("div", { className: "w-10 h-10 rounded-full border border-white/10 flex items-center justify-center opacity-0 group-hover:opacity-100 -translate-x-10 group-hover:translate-x-0 transition-all duration-500", children: _jsx(ArrowRight, { size: 20, style: { color: theme.primary } }) })] })] }), _jsx("p", { className: "text-[11px] opacity-40 uppercase font-bold line-clamp-2 italic leading-relaxed tracking-tight", children: project.mainDescription }), _jsxs("div", { className: "flex flex-wrap gap-2 pt-2", children: [project.techs?.slice(0, 4).map((tech, index) => (_jsx("div", { className: "px-3 py-1.5 text-[8px] font-black uppercase tracking-[0.2em] border border-white/5 rounded-lg bg-white/5 group-hover:border-primary/20 transition-colors", style: { color: theme.primary }, children: tech.technology?.name }, index))), project.techs?.length > 4 && (_jsxs("div", { className: "px-3 py-1.5 text-[8px] font-black uppercase opacity-20 tracking-widest", children: ["+", project.techs.length - 4, " More_Nodes"] }))] }), _jsxs("div", { className: "flex gap-8 pt-6 border-t border-white/5 text-[10px] font-black uppercase tracking-[0.3em]", children: [_jsxs("div", { className: "flex flex-col gap-1", children: [_jsx("span", { className: "text-[7px] opacity-20", children: "Traffic" }), _jsxs("span", { className: "flex items-center gap-2", children: [_jsx(Eye, { size: 12, style: { color: theme.primary } }), " ", project.viewCount] })] }), _jsxs("div", { className: "flex flex-col gap-1", children: [_jsx("span", { className: "text-[7px] opacity-20", children: "Deployment" }), _jsxs("span", { className: "flex items-center gap-2", children: [_jsx(Clock, { size: 12 }), " ", new Date(project.createdAt || "").getFullYear()] })] }), _jsxs("div", { className: "flex flex-col gap-1", children: [_jsx("span", { className: "text-[7px] opacity-20", children: "Status" }), _jsxs("span", { className: "flex items-center gap-2", children: [_jsx(Terminal, { size: 12, className: "opacity-40" }), " ", project.status] })] })] })] })] }, project.id))) })) : (
                    /* --- NO RESULTS FOUND --- */
                    _jsxs("div", { className: "py-40 flex flex-col items-center justify-center text-center space-y-8 rounded-[4rem] border-2 border-dashed border-white/5", children: [_jsxs("div", { className: "relative", children: [_jsx(AlertCircle, { size: 80, className: "opacity-10" }), _jsx(Search, { size: 30, className: "absolute inset-0 m-auto opacity-40 animate-pulse" })] }), _jsxs("div", { className: "space-y-3", children: [_jsx("h3", { className: "text-3xl font-black uppercase italic tracking-tighter", children: "Null_Registry_Result" }), _jsxs("p", { className: "text-xs opacity-40 uppercase tracking-[0.4em] max-w-sm mx-auto leading-relaxed", children: ["The search query ", _jsxs("span", { style: { color: theme.primary }, children: ["\"", searchTerm, "\""] }), " did not return any valid project nodes."] })] }), _jsx("button", { onClick: () => { setSearchTerm(''); setActiveStatus('all'); }, className: "px-8 py-4 rounded-full border border-white/10 text-[10px] font-black uppercase tracking-[0.4em] hover:bg-white hover:text-black transition-all", children: "Clear_Registry_Filters" })] })) }) })] }));
};
export default ProjectsRegistry;
